"use strict";console.log("funciona?funciona");const cardList=document.querySelector(".js-cardList"),favCardList=document.querySelector(".js-favList"),searchInput=document.querySelector(".js-input"),searchBtn=document.querySelector(".js-button"),favToggle=document.querySelector(".js-favToggle"),favSection=document.querySelector(".js-favSection");let characters=[],favCharacters=[];function renderOneCard(e,t){let a="";a=-1===favCharacters.findIndex(t=>t.char_id===e.char_id)?"":"selected";const r=document.createElement("li");r.setAttribute("class","listElement");const c=document.createElement("article");c.setAttribute("class","js-articleElement listElement__article "+a),c.setAttribute("id",""+e.char_id);const n=document.createElement("img");n.setAttribute("src",""+e.img),n.setAttribute("alt",""+e.name),n.setAttribute("class","listElement__article--img");const s=document.createElement("h3"),i=document.createTextNode(""+e.name);s.setAttribute("class","listElement__article--name");const d=document.createElement("p"),l=document.createTextNode(""+e.status);d.setAttribute("class","listElement__article--status"),s.appendChild(i),d.appendChild(l),c.appendChild(n),c.appendChild(s),c.appendChild(d),r.appendChild(c),t.appendChild(r)}function renderAllCards(e){cardList.innerHTML="";for(const t of e)renderOneCard(t,cardList);addListListeners()}function renderFavCharacters(e){favCardList.innerHTML="";for(const t of e)renderOneCard(t,favCardList)}function addListListeners(){const e=document.querySelectorAll(".js-articleElement");for(const t of e)t.addEventListener("click",handleClickFavCard)}function handleClickFavCard(e){const t=characters.find(t=>t.char_id===parseInt(e.currentTarget.id)),a=favCharacters.findIndex(t=>t.char_id===parseInt(e.currentTarget.id));-1===a?(console.log(favCharacters),favCharacters.push(t),localStorage.setItem("favorites",JSON.stringify(favCharacters))):(favCharacters.splice(a,1),localStorage.setItem("favorites",JSON.stringify(favCharacters))),renderFavCharacters(favCharacters),renderAllCards(characters)}function handleClickSearchCard(e){e.preventDefault();const t=searchInput.value;renderAllCards(characters.filter(e=>e.name.toLowerCase().includes(t)))}searchBtn.addEventListener("click",handleClickSearchCard),fetch("https://breakingbadapi.com/api/characters",{method:"GET",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{characters=e,renderAllCards(characters)});const savedFavorites=JSON.parse(localStorage.getItem("favorites"));null!==savedFavorites&&(favCharacters=savedFavorites,renderFavCharacters(savedFavorites));